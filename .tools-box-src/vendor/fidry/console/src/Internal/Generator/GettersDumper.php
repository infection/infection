<?php

declare (strict_types=1);
namespace _HumbugBoxb47773b41c19\Fidry\Console\Internal\Generator;

use function _HumbugBoxb47773b41c19\Safe\file_get_contents;
use function _HumbugBoxb47773b41c19\Safe\file_put_contents;
use function _HumbugBoxb47773b41c19\Safe\preg_replace;
use function str_replace;
final class GettersDumper
{
    private const TARGET_PATH = __DIR__ . '/../../Input/TypedInput.php';
    public static function generate() : void
    {
        $autoGeneratedContent = GettersGenerator::generate(TypeMap::provideTypes());
        $existingContent = file_get_contents(self::TARGET_PATH);
        $newContent = preg_replace('/(__AUTO_GENERATE_START__\\n)([\\s\\S]*?)(\\s+\\/\\/ __AUTO_GENERATE_END__)/m', '$1' . $autoGeneratedContent . '$3', $existingContent);
        $cleanedNewContent = str_replace("\n\n\n", "\n\n", $newContent);
        file_put_contents(self::TARGET_PATH, $cleanedNewContent);
    }
}
